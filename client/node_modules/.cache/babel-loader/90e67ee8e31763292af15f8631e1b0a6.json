{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u044E\\u0437\\u0435\\u0440/Downloads/diplom/diplom/reactapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import\"./player.css\";import{useLocation}from\"react-router-dom\";import apiClient from\"../../spotify\";import SongCard from\"../../components/songCard\";import Queue from\"../../components/queue\";import AudioPLayer from\"../../components/audioPlayer\";import Widgets from\"../../components/widgets\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Player(){var _currentTrack$album,_currentTrack$album$a;var location=useLocation();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tracks=_useState2[0],setTracks=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),currentTrack=_useState4[0],setCurrentTrack=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentIndex=_useState6[0],setCurrentIndex=_useState6[1];useEffect(function(){if(location.state){var _location$state;apiClient.get(\"playlists/\"+((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.id)+\"/tracks\").then(function(res){var _res$data,_res$data$items$;setTracks(res.data.items);setCurrentTrack((_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$items$=_res$data.items[0])===null||_res$data$items$===void 0?void 0:_res$data$items$.track);});}},[location.state]);useEffect(function(){var _tracks$currentIndex;setCurrentTrack((_tracks$currentIndex=tracks[currentIndex])===null||_tracks$currentIndex===void 0?void 0:_tracks$currentIndex.track);},[currentIndex,tracks]);return/*#__PURE__*/_jsxs(\"div\",{className:\"screen-container flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-player-body\",children:[/*#__PURE__*/_jsx(AudioPLayer,{currentTrack:currentTrack,total:tracks,currentIndex:currentIndex,setCurrentIndex:setCurrentIndex}),/*#__PURE__*/_jsx(Widgets,{artistID:currentTrack===null||currentTrack===void 0?void 0:(_currentTrack$album=currentTrack.album)===null||_currentTrack$album===void 0?void 0:(_currentTrack$album$a=_currentTrack$album.artists[0])===null||_currentTrack$album$a===void 0?void 0:_currentTrack$album$a.id})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-player-body\",children:[/*#__PURE__*/_jsx(SongCard,{album:currentTrack===null||currentTrack===void 0?void 0:currentTrack.album}),/*#__PURE__*/_jsx(Queue,{tracks:tracks,setCurrentIndex:setCurrentIndex})]})]});}","map":{"version":3,"sources":["C:/Users/юзер/Downloads/diplom/diplom/reactapp/client/src/screens/player/index.js"],"names":["React","useEffect","useState","useLocation","apiClient","SongCard","Queue","AudioPLayer","Widgets","Player","location","tracks","setTracks","currentTrack","setCurrentTrack","currentIndex","setCurrentIndex","state","get","id","then","res","data","items","track","album","artists"],"mappings":"+JAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,cAAP,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,SAAP,KAAsB,eAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,wBAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,8BAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,0BAApB,C,wFAEA,cAAe,SAASC,CAAAA,MAAT,EAAkB,+CAC/B,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,cAA4BD,QAAQ,CAAC,EAAD,CAApC,wCAAOS,MAAP,eAAeC,SAAf,eACA,eAAwCV,QAAQ,CAAC,EAAD,CAAhD,yCAAOW,YAAP,eAAqBC,eAArB,eACA,eAAwCZ,QAAQ,CAAC,CAAD,CAAhD,yCAAOa,YAAP,eAAqBC,eAArB,eAEAf,SAAS,CAAC,UAAM,CACd,GAAIS,QAAQ,CAACO,KAAb,CAAoB,qBAClBb,SAAS,CACNc,GADH,CACO,+BAAeR,QAAQ,CAACO,KAAxB,0CAAe,gBAAgBE,EAA/B,EAAoC,SAD3C,EAEGC,IAFH,CAEQ,SAACC,GAAD,CAAS,gCACbT,SAAS,CAACS,GAAG,CAACC,IAAJ,CAASC,KAAV,CAAT,CACAT,eAAe,YAACO,GAAG,CAACC,IAAL,sDAAC,UAAUC,KAAV,CAAgB,CAAhB,CAAD,2CAAC,iBAAoBC,KAArB,CAAf,CACD,CALH,EAMD,CACF,CATQ,CASN,CAACd,QAAQ,CAACO,KAAV,CATM,CAAT,CAWAhB,SAAS,CAAC,UAAM,0BACda,eAAe,uBAACH,MAAM,CAACI,YAAD,CAAP,+CAAC,qBAAsBS,KAAvB,CAAf,CACD,CAFQ,CAEN,CAACT,YAAD,CAAeJ,MAAf,CAFM,CAAT,CAIA,mBACE,aAAK,SAAS,CAAC,uBAAf,wBACE,aAAK,SAAS,CAAC,kBAAf,wBACE,KAAC,WAAD,EACE,YAAY,CAAEE,YADhB,CAEE,KAAK,CAAEF,MAFT,CAGE,YAAY,CAAEI,YAHhB,CAIE,eAAe,CAAEC,eAJnB,EADF,cAOE,KAAC,OAAD,EAAS,QAAQ,CAAEH,YAAF,SAAEA,YAAF,sCAAEA,YAAY,CAAEY,KAAhB,qEAAE,oBAAqBC,OAArB,CAA6B,CAA7B,CAAF,gDAAE,sBAAiCP,EAApD,EAPF,GADF,cAUE,aAAK,SAAS,CAAC,mBAAf,wBACE,KAAC,QAAD,EAAU,KAAK,CAAEN,YAAF,SAAEA,YAAF,iBAAEA,YAAY,CAAEY,KAA/B,EADF,cAEE,KAAC,KAAD,EAAO,MAAM,CAAEd,MAAf,CAAuB,eAAe,CAAEK,eAAxC,EAFF,GAVF,GADF,CAiBD","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./player.css\";\nimport { useLocation } from \"react-router-dom\";\nimport apiClient from \"../../spotify\";\nimport SongCard from \"../../components/songCard\";\nimport Queue from \"../../components/queue\";\nimport AudioPLayer from \"../../components/audioPlayer\";\nimport Widgets from \"../../components/widgets\";\n\nexport default function Player() {\n  const location = useLocation();\n  const [tracks, setTracks] = useState([]);\n  const [currentTrack, setCurrentTrack] = useState({});\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  useEffect(() => {\n    if (location.state) {\n      apiClient\n        .get(\"playlists/\" + location.state?.id + \"/tracks\")\n        .then((res) => {\n          setTracks(res.data.items);\n          setCurrentTrack(res.data?.items[0]?.track);\n        });\n    }\n  }, [location.state]);\n\n  useEffect(() => {\n    setCurrentTrack(tracks[currentIndex]?.track);\n  }, [currentIndex, tracks]);\n\n  return (\n    <div className=\"screen-container flex\">\n      <div className=\"left-player-body\">\n        <AudioPLayer\n          currentTrack={currentTrack}\n          total={tracks}\n          currentIndex={currentIndex}\n          setCurrentIndex={setCurrentIndex}\n        />\n        <Widgets artistID={currentTrack?.album?.artists[0]?.id} />\n      </div>\n      <div className=\"right-player-body\">\n        <SongCard album={currentTrack?.album} />\n        <Queue tracks={tracks} setCurrentIndex={setCurrentIndex} />\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}